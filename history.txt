This file contains the history of labsystem.m-o-p.de.



Feature Requests:
-------------------
/php/sendMail.inc
    Parses fields for the current user (sender) now. So you can use the normal page tags, e.g. __NAME__.
    Probably I will change it soon so that you can write personalized mails, e.g. Dear __FORENAME_ __NAME__, ...
    - Use userIDs in mailForm.
    - Load user data for generating fields then.
    
    
 - Search on manage pages: SELECT * FROM `TABLE` WHERE `FIELD` like '%SEARCHSTRING%'
   - Maybe in page sorter?
   
 - Documentation:
   - Demo Markdown lab
   - Videos
     - Work as an author
       - Create course
         - For demo: Draw on sheet -> realize online
       - tidy for html and css
       - Work with CSS
       - Different types:
         - Markdown
         - HTML
         - Text
       - Multiple Choice
       - Input
     - Export/ Import
     
     - Work as a student
       - initial registration
       - Team
       - Barriers
     - The Lock mechanism
     
     - Work as a Tutor
       - Schedules
       - Correction
       
     - Work as a course manager
       - Grading
         - set bar colors up (defaultCourseBehaviour.inc)
       - Registration! (bound to IP range...)
         - Adding a new field (table, lng)
         - Editing Mails, Info pages
         - Moving fields:
           ALTER TABLE user MODIFY desiredTeamPartner VARCHAR( 255 ) AFTER reasonToParticipate;
       - Setup new course
         - Inline editor
       - Setting up new mail and info pages (in the useradmin...)
       
     - Install
       - svn co https://labsystem.svn.sourceforge.net/svnroot/labsystem .
       - cd setup
       - bash install.sh
       - host2config
       - Ini files
       - URL install aufrufen
         - Passwort &auml;ndern!

2013-04-12
-------------------
    Changes on the backup strategy.
    The backup happens now via a php script:
  /php/cliDoInstanceBackup.php
    This script gets invoked by:
  /backup.sh
    reads out the
  /backup.txt
    The first line determines the backup directory.
    The following lines determine the instances to be backuped.
  /setup/install.sh
    Provides a comfortable setup dialog for the backup script and places it in cron.daily.
    The plugins also have a good setup now.
    If you include new plugins just place them into the plugin directory in a sub folder.
    Add a #readme.txt and an install.sh and the install script of the labsystem automatically
    will prompt for the new plugin.
    
    THANKS TO FELIX KUPERJANS FOR THE MILLIONS OF HELPING HANDS WITH THE SHELL SCRIPTS!
    
2013-04-10
-------------------
  /css/sys/labsys_mop_basic.css
  /include/classes/elements/LlElement.inc
  /pages/getEPubCover.php
    If epub is enabled in the config a link to the chapter epub is shown on the TOC page of each lab now.
    It shows the cover and the note.

2013-04-09
-------------------
  /install.sh
    Changed to pass all parameters to:
  /setup/install.sh
    Added the parameter --default that omits the dialog and sets all default values keeping the transcript.

2013-04-08
-------------------
  /include/session.inc
    Deletes old session files now (since php 5 the parameter of session_regenerate_id() has to be true for that).
  /setup/sql_new_wdb_event_log_tbl.sql
    Creates the table in the current DB now. Was buggy.
    
  /include/init.inc
  /include/page_layout.inc
    Included code for measuring the site creation. It is shown in the footer now.
  /include/classes/DBConnection.inc
  /include/logger.inc
    Included mkMultiRowInsert to make multi row inserts.
    It is used by the logger.inc.
  /pages/timeTracking.php
    Formatted output.

2013-04-03
-------------------
  /pages/register.php
  /syspix/waitingPlace_11x12.gif
    Added an orange icon for showing waiting list places.
    Changed the counting to reflect waiting list (shown with negative sign now).
    Background: usually not all students really take part or we have some more 
    lab places. Thus it makes sense to register even when the course is full...
    
  /php/sendMail.inc
  /pages/mailForm.php
    Added support to send mails to all users of a group at the useradmin page.
    Users being ALL_MAILER logged on at the useradmin see addresses #_courseID now.
    Using them sends an email to the whole group.
    This is especially intended to send an email to the unassigned students before 
    the first meeting and before those not having attended the first meeting get removed... 

2013-04-02
-------------------
	/include/logger.inc
	/pages/timeTracking.php
		Fabian and I worked the whole day on the user log. Now we log into the working database.
		A basic evaluation is already happening.
		We aim to visualize the interaction of the users with the system so that the creators of 
		the exercises see where most time is spent by the students, the students see where they 
		spend time and where others spent time, etc.

	/include/classes/DBConnection.inc
	/include/classes/Ddbc.inc
	/include/classes/Wdbc.inc
	/include/classes/elements/BCElement.inc
	/include/classes/elements/LcElement.inc
	/include/classes/elements/LiElement.inc
	/include/classes/elements/LlElement.inc
	/include/classes/elements/LmElement.inc
	/include/classes/elements/LpElement.inc
	/pages/edit.php
	/pages/pgeStdFileEdit.inc
	/pages/view.php
	/php/authenticate.php
	/php/logout.php
		Logging is included now.

	/ini/configBase/defaultCourseBehaviour.ini
		The config has a new parameter 
		logEvents               = "1"         ; logs the user interaction for visualization.
	/ini/configBase/defaultSystemLayout.ini
		The file log remains. It logs events like deletions etc. that are system critical 
		but irrelevant for the above log process.
		logDir                  = "/tmp/" ; If set, critical events like rights change, delete, etc. are logged to the given directory with automatic log rotate.

	/setup/index.php
	/setup/sql_new_wdb_event_log_tbl.sql
		The event_log table is automatically created in the setup now.

2013-03-05
-------------------
  /include/classes/elements/LlElement.inc
    Modified LlElemet.inc statistics to show full points instead of rounded ones in summary.
  /include/classes/elements/LiElement.inc
  /include/classes/elements/LlElement.inc
  /css/sys/labsys_mop_basic.css
    Added a new indicator bar showing where credits were lost for participants and correctors next to the credits at an i-answer.

2013-02-13
-------------------
  /php/sendMail.inc
    Parses fields for the current user (sender) now. So you can use the normal page tags, e.g. __NAME__.
    Probably I will change it soon so that you can write personalized mails, e.g. Dear __FORENAME_ __NAME__, ...

2013-01-27
-------------------
  /ini/configBase/defaultRegister.ini
    Added a config parameter registerIPprefix for:
  /pages/register.php
    If a user is not in registerIPprefix and this is enabled, adding the specified String to the url,
    e.g. ?...&external=external, will allow IP range-external registration. 
    Should still be spam protected and allows external students to register.

2012-11-08
-------------------
  /include/classes/elements/LiElement.inc
    Enhanced the quick correct feature to allow even faster correction.
    Quick correct fixed JSs and HTM IDs to work with multiple teams as well. Quick correction buttons are only visible when being able to correct now.
    
2012-11-07
-------------------
  /include/classes/elements/LiElement.inc
    Enhanced the quick correction functionality to set the isCorrected state an the points independently. This supports the 4 eyes principle better.

2012-10-24
-------------------
  Fixed issues with the ePub export that occured for users aas all labs tried to be exported even the non-visible ones.
  
  /pages/accessibleLabs.php
    When exporting the ePub only visible labs are getting exported now.
    
  /include/classes/elements/LlElement.inc
    When an ePub is requested but the lab is not visible the function returns directly.

2012-10-23
-------------------
  /pages/manageUsers.php
    Before user rights and team assignments were not deleted even when a user 
    was able to login once but is not able to login any more.
    What happened was that an advisor assigned a user a team number and then 
    removed this user from the instance. Then a team had suddenly two users plus
    a hidden one. As a result the users were not allowed to do the lab even 
    though they both finished.
    As a result when visiting the user rights page now, all data of users currently
    unable to log on the instance are deleted.

  /include/classes/DBInterfaceUserRights.inc
    Added a command remove rights and team assignment for a specific user UID.

  /include/classes/elements/LlElement.inc
    Cleaned the check prelab functionality.
    Revised the update status functionality so that it really reflects the 
    prelab state now. The system is checking during lab schedule now if all prelab 
    members finished and sets the status accordingly.


---
272	10/23/12 11:13 AM	1	m-o-p	Added a log entry for other team member check in the prelab. I hunt the bug that prevents the lab from opening for teams having finished the prelab.
271	10/23/12 10:33 AM	1	m-o-p	Changed the spaces after thebrackets of the fly-over correction button.
270	10/23/12 10:29 AM	1	m-o-p	Added a legend to the corrector's "start-over" button. This button directly sets the credits to 100% and the question to the state "corrected". Now it explains [ ] 100% ./ -> ? credits.
269	10/22/12 7:11 PM	1	m-o-p	Fixed the fix. Fixed visibility issue for ALLlabStatusCompact as the string comparison was wrong and thus the user rights were checked in a wrong way as well giving only editors access.
268	10/22/12 6:58 PM	3	m-o-p	Fixed ". Added a check for empty results in ALLlabStatus.
267	10/22/12 6:15 PM	2	m-o-p	Fixed "->&quot;
266	10/22/12 6:10 PM	3	m-o-p	Made the user info readible for all users again. Now one can see the names of other students not only in the history of the entry but directly again. This was restricted to correctors only?! Changed the explanations for the mass subscriptions as the explanation for adding surname and forename were missing!
265	10/21/12 8:20 PM	1	m-o-p	Added the animated test tube to the pix directory.
264	10/18/12 6:44 PM	1	m-o-p	el -> eL in the EB::mail call.
263	10/18/12 6:42 PM	1	m-o-p	Added the elementId and idx to the subject of the mail generate with the mail button.
262	10/18/12 6:34 PM	1	m-o-p	Added an "icon" to the subject of the mails created with the mail button.
261	10/18/12 6:27 PM	1	m-o-p	Fixed element links.
260	10/18/12 6:20 PM	3	m-o-p	Added the element's title as subject to the mail button for the elements.
259	10/17/12 8:52 PM	1	m-o-p	Fault escaping of URLs fixed ;)
258	10/17/12 8:22 PM	1	m-o-p	Added htmlentities to the constants to be replaced. This should help for user names with Umlaute to display them correctly.
257	10/16/12 9:38 PM	1	m-o-p	Fixed the directory check.
*256	10/16/12 9:10 PM	1	m-o-p	Import directory walker should skip non-directories (like .htaccess file) now.
255	10/16/12 3:00 PM	1	m-o-p	Changed schedule start time to 00:00:00 instead of date('H:i:s').
254	10/15/12 7:56 PM	4	m-o-p	Added comments to the menu and the user roles.
---

2012-09-18
-------------------
  /include/classes/ElementButtons.inc
  /include/classes/elements/Element.inc
  /ini/de.lng
  /ini/en.lng
  /syspix/button_folder_open_13x12.gif
  /syspix/button_print_13x12.gif
    Changed the printer icon to a folder icon and the explanation text. 
    It says now what it does: opening all included elements. The printer was misleading.

    Also added serializing functionality for m-elements to Element.inc. 
    It removes trailing empty answers now when serializing. 
    Maybe this fixes the issue with empty imported answers... 
    If not it is something with the expand on import... 
    I will check this now.

  /include/XIlib.inc
  /include/classes/elements/Element.inc
  /include/classes/elements/LmDBInterface.inc
  /include/classes/elements/LmElement.inc
  /pages/XIport.php
    Solved the bug that imported an empty answer when only two answers were given 
    for a multiple choice question. The bug was caused in the XIlib.inc processElement 
    when going through all answers using the NON-UPDATED answerCount. It was always 3
    due to 3 answers in the prototype it was initially initialized with...
    
  /include/page_layout.inc
	/ini/configBase/defaultSystemLayout.ini
    Added support for google-code-prettify. See plugins/google-code-prettify/#README.txt.
    
2012-09-09
-------------------
  /plugins/LSE/class_diagram.png
    Added LSE documentation (class diagram).

2012-06-10
-------------------
  /php/uaPwRemind.php
    Fixed loading user data for the personalized mail.
    
2012-05-14
-------------------
  Epub finilazing with Bibek. Great work man!
  
2012-05-12
-------------------
  /ini/{en, de}.lng
    Changed the help text for the checkup button. It explains the new behavior checking only *answered* questions up better now.

2012-04-27
-------------------
  /include/classes/elements/LmDBInterfaceAnswers.inc
  /include/classes/elements/LmElement.inc
    Changed the lock behaviour: Now only CHANGED questions get checked on the checkup of the prelab.
    To do so unanswered questions are marked by setting the 2^60 bit as mark.
    This means that if answer 60 is set the mc will always be marked as unanswered and cannot be checked.
  /include/classes/customErrHandle.inc
    Added code to mail error reports only for users being logged in.
    
2012-04-23
-------------------
  /pages/uaMyData.php
  /php/uaMyDataSave.php
    Fixed an escape issue in the html form. " led to closing the value tag :(

2012-04-21
-------------------
  /pages/view.php
    Added header("HTTP/1.0 404 Not Found"); when a page is not found.
  /include/customErrHandle.inc
    Added special code for the googlebot as it bothers with invented urls or pages and thus page faults...
  /include/classes/elements/LsDBInterface.inc
    When you make a new schedule it starts today 0:00:00 now and ends in one week at 23:59:59.
    Before it always started 2005/04/15.
  /include/customErrHandle.inc
    Added code to handle the google bot separately when enabling the email feature.
    Otherwhise you may get a lot of mails for page faults.
  /pages/XIport.php
    Schedules for imported labs start now in $newSchedule->num weeks at 0:00:00 and end 2 weeks later at 23:59:59.
    This gives you directly an overview on the weeks you need for a course.
    At the same time you can reschedule as nothing starts immediately.
    
  /include/classes/elements/LiElement.inc
    Set the style of the buttons at the file upload to the labsystems button style.
    
  /include/classes/ElementButtons.inc
  /include/classes/elements/LlDBInterface.inc
  /include/classes/elements/LlElement.inc
  /ini/de.lng
  /ini/en.lng
    Finally implemented file management for labs!

2012-04-20
-------------------
  /pages/mailForm.php
    Included the sendMail.inc after checking if the site is accessible.
  /include/customErrHandle.inc
    Included the call to the display error handler to give the user feedback.
    Added more information to the error reports (full URL, User, Rights).
    Activate mail reports by simply adding an email address in the files $ERRORMAIL_RECEIVER variable.
  /include/XIlib.inc
    handleLocalFile does not replace serverurl/"nothing" with .. anymore as one
    may want to redirect to this server.
  /include/classes/elements/LiElement.inc
    Updated the lock behaviour (Thanks to Andrey Uznov for pointing me to the need for looking at that again!):
      - A opens question Q1
      - B refreshes and sees Q1 opened
      - A saves Q1 and opens Q2
      - B puts text into Q1 and saves
        -> Now Q1 contains:
           - A hint one should work together, not in parallel
           - B's (newer) answer
           - A's (older) answer
    Cancel works now a expected too. (Before it removed all locks, now it only removes the lock if set to the canceled input.)
  /pages/mailForm.php
    Added the get variable "text" for the mail body in preparation of element links.
  /syspix/button_mail_light_13x12.gif
  /include/classes/ElementMenues.inc
  /include/classes/ElementButtons.inc
    Added a button to mail links to specific elements via the mailform.
    This button is used next to the history button for regular users.
    It links to the pages/mailForm.php placing a link to the current element into the mail.
    This button can be used to point someone else to an element, e.g. a teammate "look at this" or a corrector "Could you explain your correction here?"
    Thanks to Andrey Uznov for requesting the nice feature.
  /pages/register.php
    The initial password was not stored correctly in the database (salt was missing).
    Now it works.
  /css/sys/labsys_mop_basic.css
  /include/page_layout.inc
  /syspix/1pixel.gif
    Set the page size to max-width: 1200 and enforced it via a transparent 1pixel.gif in page_layout.
  
    
2012-04-19
-------------------
  /include/allVisibleLabIDX.inc
  /include/menu.inc
  /pages/accessibleLabs.php
    Put the functionality to discover visible labs in allVisibleLabIDX.inc.
    Changed the logic to collect all scheduled labs first and then adding thos always visible on top.
    The reason is that we want to make labs accessable before schedule for those students wanting to
    access early. At the same time we want to keep the original schedule.
  /php/saveFile.php
    Removed stripslashes when saving.
  /php/sendMail.inc
    Removed an obsolete comment.
  /pages/uaManageUsers.php
    Uncommented the lastChanged field on csv export to make sorting visible.
  /include/customErrHandle.inc
    Added error handler that sends an email instead of showing the error.
    To use it uncomment the code and set the $ERRORMAIL_RECEIVER.
    
2012-04-18
-------------------
  /include/classes/Usr.inc
    Fixed isOfType("IS_CORRECTOR" by removing the "". 
  /include/classes/elements/LcElement.inc
    Added "getePubContents" to allow having a c as preface element.
  /include/XIlib.inc
    Changed file names when importing files from the repository.
  index.php
    Changed forwarder to use accessibleLabs.php
  /pages/accessibleLabs.php
    Does not break on ePub creation when the preface is missing.
  /pages/editConfig.php
    Checks the access rights better now.

2012-04-16
-------------------
  /include/classes/Pge.inc:
    Added constant __CURRENT_TIMESTAMP__. It gets formatted with the system configuration setting $lng->get("DateFormat").
    It is used for the ePub imprint for instance.
  /pages/accessibleLabs.php
    EPub link is now only visible when you are logged in.
  /plugin/LSE...
    labsys_epub_theme.css
    Plugin.php
    MultiChapter.php
    coverpage.phtml
  Some Updates for the ePub.
  
  /include/classes/ElementButtons.inc
  /include/classes/elements/LlElement.inc
  /pages/accessibleLabs.php
    Added a new variable to the config "allowEpubDownload". Only if available and set to "1" the ePub downloads work and are offered.
  
  /include/classes/elements/LlElement.inc
    Added Cover and imprint to chapter ePub.
    
2012-04-18
-------------------
  /css/sys/labsys_mop_basic.css
    Added img tag resizing images in to a max-width of 100%.
    No overlap on smaller screen anymore...
  /include/page_layout.inc
    Changed (C) -2012
  /include/XIlib.inc
    Added tidyHTML to the export finction processContent().
    HTML gets cleaned on export now.

2012-04-15
-------------------
  Fixed things in the LSE plugin for ePub export.
  /include/classes/ElementUser.inc
    Fixed a security issue when checking for non-existent user roles (is_numeric check added).
    
  /pages/accessibleLabs.php
    Fixed that the Login page is called when someone is not logged in and wants to load the ePub.
  /pages/editConfig.php
    Nothing?
  

editConfig.php
2012-04-10
-------------------
  /pages/accessibleLabs.php
  /pages/getEPubCover.php
    Added section for downloading the ePub showing the cover generated by getEPubCover.php.
  /ini/{de,en}.lng
    Changed the explainLink2epub text.

2012-04-09
-------------------
  /plugins/LSE/Util/CoverImageGenerator.php
    Created the cover page.
         
2012-03-26
-------------------
  /include/classes/elements/BCElement.inc
  /include/classes/elements/LcElement.inc
  /include/classes/elements/LlElement.inc
  /include/classes/elements/LpElement.inc
  /ini/config_demo.ini
  /ini/config_useradmin.ini
  /pages/accessibleLabs.php
    Several changes concerning the Export of all labs as ePub.

2012-03-01
-------------------
  /pages/mailForm.php
  /php/sendMail.php -> /php/sendMail.inc
    Changed the mailForm so that it keeps the message content when sending.
    This is very helpful when one wants to send information with slight changes to several users (like marks).
    utf8 mailing is possible now allowing German Umlaute for instance.

2012-02-29
-------------------
  /pages/accessableLabs.php
    Prepared the accessable labs for ePub creation.
    Renamed the misspelled file to accessIbleLabs.php.
    Added code for the preface.
  /ini/config_*.ini
    Added prefixID as variable to set the prefix for the ePub.
    
2012-02-01
-------------------
  /include/php_session_management.inc
    Removed.
  /include/session.inc
    PHP uses file based session data management per default now so the own implementation is not needed anymore.
  /php/uaMyPWSave.php
    Changed log entry code. (Was usuing unavailable field.
  /include/page_layout.inc
    htmlspecialchars_decode to remove html escapes from alert.

    
2012-01-30
-------------------
  /setup/install.sh
    Added shell script for initial setup.
  /index.php
    Added $STANDARD_INDEX as starting point if no config is given.

2012-01-29
-------------------
  /setup/sql_new_ddb_pages_tbl.sql
    Fixed an issue with a comma. Thanks Rudi.


2012-01-28
-------------------
  /ini/config_demo.ini
    Fixed a link to defaultRegister.ini.
  /setup/index.php
    Added \' to the setup string for the admin password.
    
  Thanks to Rudolf koopmann for reporting these issues!
     
2012-01-25
-------------------
  /setup/sql_new_ddb_pages_tbl.sql
    Limited the access to user with rights 1024 (= IS_CONFIG_EDITOR).
  /ini/configBase/defaultRegister.ini
  /pages/register.php
    Moved "registerIPprefixViolationNote" -> {de,en}.lng
    Fixed loading personalized data also for already registered users.
     
2012-01-17
-------------------
  /ini/configBase/
    Formatted, cleaned, and commented the configBase files.
  /include/classes/UserInterface_proto.inc
    Fixed paranthesis...
  /php/uaUnPwRemind.php (<- PidPasswordMail)
  /pages/register.php (<- PidRegistrationPage, PidAfterRegistrationPage, PidRegistrationMail)
    Changed the registration pages and all system generated emails to be generated from
    content out of the DBs and not the config files.
    The config files only link to the page indices now.
  /setup/sql_new_ddb_pages_tbl.sql
    Added the pages for the above in the setup.
    Also added the overview page explaining these files.
  /ini/menu_en_useradmin.inc
    Added a link for the IS_CONFIG_EDITOR editor to the overview of the data above page in the menu.
  /ini/{de,en}.lng
    Removed mail texts that are not used anymore.
  /include/classes/elements/LcElement.inc
  /include/classes/elements/LlElement.inc
  /include/classes/elements/LpElement.inc
    Changed that the title can contain unreplaced constants now as well.
  /include/page_layout.inc
    Added code to parse the title for constants to replace.
  /include/classes/Pge.inc:
    Changed the replace constants function for lazy binding.

2012-01-17
-------------------
  /include/menu.inc
    Fixed link issue for login and register pages. It works now also in sub directories.
    
2012-01-10
-------------------
  /css/sys/labsys_epub_theme.css
  /plugins/LSE/Book.php
  /plugins/LSE/Decorator.php
  /plugins/LSE/Element.php
  /plugins/LSE/EPub.php
  /plugins/LSE/Exporter.php
  /plugins/LSE/Plugin.php
  /plugins/LSE/templates/decorators/book.phtml
  /plugins/LSE/templates/decorators/lowI.phtml
  /plugins/LSE/templates/decorators/lowM.phtml
  /plugins/LSE/Util.php
  /include/classes/elements/BCElement.inc
  /include/classes/elements/LcElement.inc
  /include/classes/elements/LlElement.inc
  /include/classes/elements/LpElement.inc
    *Bibek Shrestha* and I did some improvements on the ePub export.
  /include/helper.inc
    I fixed an issue with htmlspecialchars instead of htmlentities in non HTML and non MD elements.
    (Relevant for export with Umlaute.)
  /include/XIlib.inc
  /pages/XIport.php
    The export exports the solutions of i and m files now into the subfolder 
    "data/withSolutions". If this folder is present, the i and m elements are 
    taken from this folder. If it is not present the versions from "data/"
    are taken. They do not contain the solutions.
    If you want to give preview to a lab just delete the "withSolutions/"
    folder before distributing.
     
2012-01-08
-------------------
  /include/classes/elements/LlDBInterfaceUidStatus.inc
    Corrected the getAllUidDataALLLabs query to query labs with multiple schedules only once.
    Thank you Leon Winter for the hint! (Problem was introduced some weeks ago by adding the sorting...)
  /include/classes/elements/BCElement.inc
  /include/classes/elements/LcElement.inc
  /include/classes/elements/LiElement.inc
  /include/classes/elements/LlElement.inc
  /include/classes/elements/LmElement.inc
    Added enumeration to the elements.
    Added TOC export to the BC elements.
     
2011-12-28
-------------------
  /pages/editConfig.php
  /ini/{en,de}.lng
    Now you can only edit configurations of the currently active host2config-vhost.
    This is much less error prone.
  /pages/pgeStdFileEdit.inc
    File names get naturally sorted now.
    
2011-12-27
-------------------
  /ini/{en,de}.lng
    New string "load", "Explain_UR_1024", "MnuEntryEditConfig", "confirmSaveAs", "setupLinkNote", "fileSelectNote"
  /ini/db_user_admin_roles.inc
    Defined new role "IS_CONFIG_EDITOR". This user can save new config files and edit all config files.
    
  /ini/default_user_roles.inc -> user_roles.inc
  /ini/db_user_admin_roles.inc -> user_roles_useradmin.inc
    Renamed and annotated for clean-up reasons.

  /pages/editConfig.php
    New edit for configs that is shown for IS_CONFIG_EDITOR only. (ONLY works in USERADMIN instance!)
  /pages/pgeStdFileEdit.inc
  /php/saveFile.php
    Added select and saveAs functionality for IS_CONFIG_EDITOR users. (ONLY works in USERADMIN instance!)
  /pages/editUsrCss.php
  /pages/editMenu.php
  /pages/editConfig.php
    Added field "$filePrefix" for select...

    
    
2011-12-26
-------------------
  Thanks Leon Winter for pointing me on the following issues!
  
  /include/classes/DBConnection.inc
    Added error message and script exit when DB cannot be connected.

  /include/configuration.inc
    Changed some error messages.
    
  /pages/myRights.php
  /pages/edit.php
  /pages/export_functions.php
  /pages/mailForm.php
  /pages/manage.php
  /pages/manageUsers.php
  /pages/myRights.php
  /pages/pgeStdFileEdit.inc
  /pages/uaCreateUsers.php
  /pages/uaManageUsers.php
  /pages/uaMyData.php
  /pages/uaMyPW.php
  /pages/XIport.php
    Changed the behaviour of the page so that it throws directly an error when not visible.

2011-12-13
-------------------
  /setup/index.php
    Changed the password generation mechanism to the new crypt with salt.

  /include/classes/elements/BCElement.inc
  /include/classes/elements/LcElement.inc
  /include/classes/elements/LiElement.inc
  /include/classes/elements/LlElement.inc
  /include/classes/elements/LmElement.inc
  /include/classes/elements/LpElement.inc
    Started adding ePub support. Can be accesses via adding .epub to the address (e.g. l1.epub).
    
  /include/menu.inc
    Changed the https link to work with subdirectories. (Replaces /view by /login now.)


2011-12-12
-------------------
  /include/classes/DBInterfaceUser.inc
  /php/uaMyPWSave.php
  /php/uaUnPwRemind.php
    Passwords are stored with the UID as salt now.
     
2011-12-12
-------------------
  /css/sys/labsys_mop_basic.css
    Added formatting rule for pre to break long lines.
  /include/classes/elements/LiElement.inc
    Clearified some if statements in showAnswerData. May have been a problem for the lock.
    Changed display of answer in using <pre> when unformatted to keep tabs and spaces.
    Fixed the issue with multiply showing fileUploads.
  /include/helper.inc
    Added formatting for tabs in returnHTML.

  /php/uaManageUsersExecute.php
  /php/uaMyDataSave.php
    Fixed unescaped things and link.

  /include/classes/DBConnection.inc
  /include/classes/elements/LcDBInterface.inc
  /include/classes/elements/LiDBInterface.inc
  /include/classes/elements/LiDBInterfaceAnswers.inc
  /include/classes/elements/LiDBInterfaceLocks.inc
  /include/classes/elements/LiDBInterfaceUidTeam.inc
  /include/classes/elements/LlDBInterface.inc
  /include/classes/elements/LlDBInterfaceUidStatus.inc
  /include/classes/elements/LmDBInterface.inc
  /include/classes/elements/LmDBInterfaceAnswers.inc
  /include/classes/elements/LpDBInterface.inc
  /include/classes/elements/LsDBInterface.inc
    Fixed XSS issue with username in logs...
    The user name was not escaped in the DB logs before and thus XSS was possible
    by inserting XSS in the user name.

2011-12-11
-------------------
  Thanks to Andrey Uzunov for questioning the lock's behaviour.
  /include/classes/elements/LiElement.inc
    Changed the lock behaviour:
      The lock assures that the whole team has only one question opened for answering.
      As the pages do not automatically reload this may reult in trouble when the
      team members click concurrently on "give answer". Up to now this resulted in a
      warning and the later request got the lock.
      NOW when a lock is already there and someone tries to accidentally (not clicking
      on the red lock) open another question he simply gets a warning and the consistent
      view. Opening can be done explicitly via clicking on the red lock then.
  /include/classes/elements/LlDBInterfaceUidStatus.inc
    Changed the order of the results shown on the all lab status:
      - sorted after starting time
      - then sorted after lab idx (time the lab was imported)
    The prototype of the lab is not shown anymore.
  /include/classes/elements/LiElement.inc
    Fixed Bugs:
    - Checkbox only shown when seeing someone's data...
    - XSS problem with </textarea><strong>foo</strong> when editing input...
      Thanks Leon Winter for pointing this out!

2011-12-10
-------------------
  Thanks to Andrey Uzunov for suggesting the cancel feature.
  /include/classes/elements/LiElement.inc
    Added a cancel button when answering or correcting a question.
    It results in no action (cancellation).
  /ini/{en,de}.lng
    Added a string for "cancel".
  /css/sys/labsys_mop_basic.css
    Added a style for the cancel button: .labsys_mop_i_cancel_button
    
2011-12-02
-------------------
  /php/getUploadedFile.php
    Now the correct file name is used. (Thanks Andrey Uznov for filing this bug.)
    
2011-11-25
-------------------
  Fixed closing of inputs is only done when a record for the lab exists in the status table (= the lab was started).
  The missing of such a check led to an error message for users that did not do the lab and access statistics (e.g. correctors).

2011-11-24
-------------------
  Fixed bug with the new start over feature when correcting.
  
2011-11-23
-------------------
  /include/classes/elements/LiElement.inc
    Now it is possible to set a question as corrected without opening it.
    (Thanks to Yannick Scherer for the request.)
    
    Changed the behavior to jump to the correctors comment directly when opening 
    instead of the beginning of the answer (fastens the process for longer answers.)
    (Thanks Sibi Antony for the request.)
    
2011-11-21
-------------------
  /include/classes/elements/LiElement.inc
  /setup/index.php
    Added a hint for the upload limit.
    Fixed setup script (did not reflect hostname2config.inc missing).

2011-11-20
-------------------
  /pages/register.php
    The config parameter "registerIPprefix" can be a comma separated list now.
  /include/classes/elements/LlElement.inc
    Corrected a bug: the lab closing algorithm used the user's current 
    team which might have changed from when the user did the lab. Now it
    takes the team from the labUID status ($permissions['currentTeam']).
    
2011-11-20
-------------------
  /include/classes/Url.inc
    Changed rawLink2 to be faster and to put the variables by the system BEFORE
    those passed in an URL. This results in overriding by variables given in the link...
  /pages/register.php
    Added a check for a given IP prefix to the register page.
    This effectively allows only students in a certain network prefix (like University)
    to register.
    Only if the fields are present in the config the check is done:
      registerIPprefix   = "131.159." ; Only from this IP prefix (String comparison, so IPv6 should work as well) registration is enabled.
      registerIPprefixViolationNote = "You can only register from within the university network. Either connect from the university or use the VPN."
      
2011-11-15
-------------------
  /include/classes/elements/LlElement.inc
  /include/menu.inc
    Changed l?.ALLlabStatusCompact to be linked to l1 and to have the correct title.
    Thus it will work always now (as l1 is always there).

2011-11-14
-------------------
  /include/classes/Menu.inc
    Handle https as external link as well...
  /include/menu.inc
    Added comment to full url register page.
    The advantage is that all registrations go to one singl page then.
    This page can also provide the intro labs already for the automatically created accounts.
  /include/classes/Menu.inc
    Does not handle the login.php page as an external page now.
  /include/customErrHandle.inc
    Escaped HTML to fix reflected XSS flaw
    Thanks to Johannes Naab for reporting!!
 
2011-11-13
-------------------
  /include/hostname2config.inc
  ->  /include/configuration.inc + ../ini/host2config.ini
    Moved functionality to the configuration.inc
      Checks now if ../ini/host2config.ini is present.
      If so and it contains the current first prefix XYZ. the 
      prefix from ../ini/host2config.ini is used to load the config.
  /include/logger.inc      
    Gets initiated by a config variable now. If logDir = "someDir" is 
    set the logs will be created in this directory. If it is not set or 
    empty no logs are getting created.
  /include/classes/elements/LcElement.inc
  /include/classes/elements/LiElement.inc
  /include/classes/elements/LlElement.inc
  /include/classes/elements/LmElement.inc
  /include/classes/elements/LpElement.inc
  /include/classes/elements/LsElement.inc
  /include/classes/Menu.inc
  /include/classes/Url.inc
  /include/configuration.inc
  /include/hostname2config.inc
  /include/init.inc
  /include/language.inc
  /include/logger.inc
  /include/page_layout.inc
  /include/session.inc
  /index.php
  /index_demo.php
  /pages/confirm.php
  /pages/history.php
  /pages/login.php
  /pages/mailForm.php
  /pages/manage.php
  /pages/manageUsers.php
  /pages/register.php
  /pages/sorter.inc
  /pages/uaManageUsers.php
  /php/authenticate4Demo.php
  /php/delete.php
  /php/emptyDB.php
  /php/executeOnLab.php
  /php/getFirstLastFinal.inc
  /php/getUploadedFile.php
  /php/uaManageUsersExecute.php
  /ini/configBase/ilab2Register.ini
  /ini/host2config.ini
    Changed $_GET and isset( $_GET to $url->get and $url->available
    This adds escape methods and secures parameters via URL thereby.
    
  /include/classes/elements/LiElement.inc
  /include/classes/elements/LlElement.inc
  /include/classes/elements/LmElement.inc
  /include/classes/elements/LpElement.inc
  /include/classes/elements/LsElement.inc
  /include/logger.inc
  /php/authenticate.php
  /php/saveFile.php
  /php/saveUserRights.php
  /php/sendMail.php
  /php/uaCreateUsers.php
  /php/uaManageUsersExecute.php
  /php/uaManageUsersSave.php
  /php/uaMyDataSave.php
  /php/uaMyPWSave.php
  /php/uaUnPwRemind.php
    Moved urlencode for parameter into the $url class out of the local files.
    If cooke is available use the cookie for transport when possible.
  /pages/accessableLabs.php
    If a schedule exists but the lab does not this entry is ignored on this page.
  /include/classes/LsElement.inc
    If a schedule exists for a non-available element the schedule gets automatically deleted.
  /include/classes/Url.inc
  /pages/uaManageUsers.php
  /php/uaManageUsersExecute.php
    Fixed redirect link.

2011-11-09
-------------------
  /include/classes/elements/LlElement.inc
    Added delete button for labs to be exported. Deletes only the l-Element 
    keeping all building blocks. This removes the lab from the list. Helpful 
    when a lab is imported multiple times but not needed any more (updated 
    version in same instance etc.). Full deletion is not necessary as simply 
    a new instance can be spawned.
  /pages/XIport.php
  /syspix/labsystem_wait_17x117.gif
    Added progress bar image on exporting.
    
2011-11-04
-------------------
  /include/XIlib.inc
    updateUsedClasses: updated regEx to match more precisely
    
2011-11-03
-------------------
  /include/classes/elements/LlElement.inc
    getExportImportRow added $prefix (used by pages/XIport.php to indicate the lab number).

  /pages/XIport.php
    Added htmlentities to style sheet info in <PRE> at import and export.
    
    Fixed Stylesheet export issue when more than one lab was exported at a time. $stylesToExport & $usedClasses get reinitialized now with each lab.
    
  /include/XIlib.inc
    Included the function validFilename to make compatible filenames from exported files.
    Added urldecode here as proper filenames in html are with %20 instead of space etc.
    
    Included function to delete export directory before export if it exists.
    
    Updated the regex for handling files and pictures.
    Added code to decode urlencoded urls and to remove trailing and heading spaces.
    
    Changed file structure for export:
     /css
     /images
     /files
     /data
    
2011-10-21
-------------------
  /pages/register.php
    Changed Mailsender to systemname <noreply@servername>.
    Changed DB query for registered...
  /php/uaPwRemind.php
    Changed Mailsender to systemname <noreply@servername>.
    
2011-10-19
-------------------
  /pages/register.php
    Saves now really all additional DB fields...
    
2011-10-18
-------------------
  /include/classes/DBInterfaceUserRights.inc
    Updated team assignment to really assign to each participant current idx in DB + Offset $cfg->get("DefaultAuthUserTeam")
  /include/XIlib.inc
    Added multiline support to some regex searches for styles and local files and pix
  /include/classes/elements/LiDBInterfaceAnswers.inc
    Changed $cfg->get('UploadDirectory') to end with a slash like all other directories given in the ini files.
  /ini/{en,de}.lng
    Added MarkDown [MD] hint to inputContentsHtml
  /setup/index.php
    Updated directory check to work with subdirectories correctly.
    
2011-10-17
-------------------
  /setup/index.php
    Changed timestamp in userDB.
  /pages/uaManageUsers.php
    GroupBy -> orderBy for sorting as group by only lists one entry...
  /pages/register.php
    registerFor field added ('.$_GET['config'].') as when registering on the _ua otherwhise there is no separation between servers possible.
    registerFor contains now CourseID.Server Subdomain.
  /include/init.inc
    Changed comments for config2host as it does not change $_GET['config'] but fill the $configPrefix (has to be like this for links...)
  /include/menu.inc
    Registration link points to /?address=register
  /index.php
    Added routing for address=accessableLabs and address=register
  /pages/sorter.inc
    Added address=
  /include/XIlib.inc
    isLocal(): Added mailto as criterion for non-local files.
 
2011-10-13
-------------------
  /ini/{en,de}.lng
    Added field description for registration "intendedDegree"
  /index.php
    Added url rewriting for address=accessableLabs & address=register
  /pages/manageUsers.php
    View is now also stable after saving.
    
  /include/classes/DBInterfaceUserRights.inc
    Changed team numbering for new user setup. Now every user becomes his own team number.
    The number is built: $cfg->get("DefaultAuthUserTeam")+$newIDX (=idx the user gets in the workingDB)
    
2011-10-12
-------------------
  /setup/index.php
    Fixed setup demopage content login link.
  /ini/*.ini
    Changed the ini files to use the include statement.
  /pages/register.php
    Added form to register for the current course.
    
    Nice feature: All fields you add to your userDB will automatically be queried!
                  You can even add customized explanations in your language file by just naming the String like the DB field.
    
  /ini/{en,de}.lng
    titleRegister, MnuEntryRegister, 
  /include/menu.inc
    Added register to LogIN menu.
    
  New cfg fields: 
    - registerNote contains a note for the register page of this lab.
    - thankYouForRegisteringNote shown after registration is done.
    - maxRegistrations number of maximum people to register with this course id.
    - afterRegisterMailSubject
    - afterRegisterMailText

  New lng fields:
    - registerNote
    - thankYouForRegisteringNote
    - desiredTeamPartner
    - reasonToParticipate
    - placesLeft
    - restrictTo
  New syspix
    /syspix/freePlace_11x12.gif
    /Pathsyspix/fullPlace_11x12.gif

  /pages/uaManageUsers.php
    Removed jumps when saving.
    Added Restrict to.
    Improved the selection and link logic.
    Added export.csv to export the current query as csv (useful if you have to keep track of your marks somewhere else...).
  /pages/sorter.inc
    Added restrict to for uaManageUsers.
    
  /include/classes/elements/LlElement.inc
    Added csv export for compact view.
    
2011-10-11
-------------------
  /include/XIlib.inc
  /pages/XIport.php
    Added headlines to the export and the import part on the xiport page.
    Added the filedate for the import labs on the overview.
  /css/sys/labsys_mop_basic.css
    Added style for .labsys_mop_l_row .labsys_mop_l_file_description
  /ini/{de,en}.lng
    {ex, im}portFollowingLabs
  
2011-10-09
-------------------
  /include/classes/elements/LiDBInterface.inc
  /include/classes/elements/LcDBInterface.inc
  /include/classes/elements/LpDBInterface.inc
  /include/classes/elements/LmDBInterface.inc
  /include/classes/elements/LlDBInterface.inc
  /include/classes/elements/LsDBInterface.inc
    Changed the setData function history. "]" as string[0] indicates the import now and 
    prevents adding the current user line so that the history is the original one.
  /include/XIlib.inc
    Added code to add the character ] to the history.

2011-10-08
-------------------
  /include/XIlib.inc
  /pages/XIport.php
    Added Export and Import for Stylesheet info from the user style:
      - loads the $cfg->get('UserStyleSheet')
      - parses it extracting the tags
      - only takes into regard the last tags to prevent from building a dom tree
      - when importing only imports non existing styles
    Fixed stylesheet issues for the previes.html.
    Included picture links to labsystem.m-o-p.de into preview.html so that it should be fully usable now.
    Added user output when exporting and importing styles so that the user knows what is done.
    Changed the access rights to the page (IS_CONTENT_EDITOR needed now).
  /php/saveFile.php
    Removed warning popup when CSStidy has nothing to say.

  /include/menu.inc
    Added schedule to LogIN menu.
    
  /ini/{de,en}.lng
    Added Strings for
      - MnuEntrySchedule    = "schedule"
      - MnuEntryUaUsrRights = "user rights"
      - MnuTitleEdit        = "edit"
      - MnuEntryElements    = "elements"
      - MnuEntryStyleSheet  = "edit css"
      - MnuEntryXIport      = "import | export"
      - MnuEntryEditMenu    = "edit menu"
      
   All menus are now auto generated.
   
   /setup/index.php
     Copies prototypes of user roles, user stylesheet and menu if the one given in the ini file are not present (= init).
      
2011-10-07
-------------------
  /include/XIlib.inc
    Added support for MarkDown links and pictures when exporting/ importing.
    An alternative would be to convert Markdown to HTML when exporting. Did not chose this path for readability.
  /css/sys/labsys_mop_basic.css
    CAdded "inline" for _m_question p as MarkDown uses this style...
  
    
2011-09-13
-------------------
  /include/classes/LpElement.inc
    Added anchor as link when clicking on the view icon at the edit page.
  /include/classes/ElementButtons.inc  
    Added url flag "hideHistory". Temporarily handy for HTML diffs...

2011-09-13
-------------------
  /ini/en,de.lng
    Added hideExampleSolutionInThisTab = "Hide the example solutions in this tab."

2011-09-07
-------------------
  /include/classes/elements/LlElement.inc
    reMapUidTeam added update after remapping
  /include/classes/elements/LiElement.inc
    showAnswer embedded the fileUpload so that also the credits are shown for editors.
    Get parameter "hideExampleSolutionInThisTab" hides the example solutions. Added this to the menu line (under logo).
    
  /syspix/button_{play, stop, paused}_9x9.gif new/ colored
  /include/page_layout.inc
    Added proper url handling temporarily hiding user answer data and example solutions in the menu.
    
2011-09-06
-------------------
 /setup/index.php
   Checks for proper accessability of folders now.
   Clarified the expected access rights for directories and files.
   
2011-09-05
-------------------
  /setup/sql_new_ddb_input_tbl.sql
    Added new row `hasFileUpload` tinyint(1) DEFAULT '0'
    
  !!! Due to the added field in the input element no old exported inputs can be imported anymore as order is mandatory...
    
  Added Upload functionality to inputs.
  /include/classes/elements/LiElement.inc:
    showFileUpload
  /include/classes/elements/LiDBInterfaceAnswers.inc:
    Added functionality for handling upload(ed) files.
  /include/classes/elements/LiDBInterface.inc:
    Added functionality for hasFileUpload field (load + save);
  /ini/en.lng
  /ini/de.lng
    New Strings

  Table data/inputs needs new field tinyint(1) hasFileUpload.
  New ini options:
    UploadDirectory = "/tmp"
    InputDirectory = "inputs"
  !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!  
  !!! Note: Do not forget to protect the upload directory via .htaccess !!!
  !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
  
  New Language Strings:
  noFilesYet
  fileList
  deleteFile
  upload
  hasFileUpload
  options
  
  New Styles:
  .labsys_mop_elements_i_around .labsys_mop_i_fileUpload
    .labsys_mop_i_file_list
    .labsys_mop_i_file_description
    .labsys_mop_i_file
    .labsys_mop_i_arrow
    .labsys_mop_i_noUploads
  
  New Images:
  ../syspix/delete-arrow.gif
  
  /php/getUploadedFile.php
    To download the uploaded files from access protected directory. Checks permissions.


 
2011-09-02
-------------------
  /css/sys/labsys_mop_basic.css
    Changed multiple styles. Esp. m_around, i_around, i_around .labsys_mop_textbox{ width 
    
2011-07-26
-------------------
  /include/classes/elements/L?DBInterface.inc
    setData()
      the adding was done using the DB. While this is in general good it removes also all history when importing. Thus it got changed back to using the provided history instead of that from the DB.
  /pages/XIport.php
    Import creates now automatically a schedule for yesterday for each imported element. -> Easy to edit. Gone so no security problem.
    Link to element from import page (top).
  /include/XIlib.inc
    Edited error in processElement.
    mapIt: preserve 1 as it is prototype and used for "non-existing" in Labs...
  /include/helper.inc:
    createNew:
      aded 's' element.
  
2011-06-23
-------------------
  /ini/de.lng
  /ini/en.lng
    Comparison and translation of language strings for new functions.
    
  /include/language.inc
  /include/page_layout.inc
  /ini/en.lng
  /ini/de.lng
  /pages/selectSysLng.php
    Added page to select system language.

2011-06-22
-------------------
  /include/page_layout.inc
  /pages/scripts.js
  /ini/en.lng (discardChangesWarning)
  /include/classes/LcElement.inc
  /include/classes/LiElement.inc
  /include/classes/LlElement.inc
  /include/classes/LmElement.inc
  /include/classes/LpElement.inc
  /include/classes/LsElement.inc
  /pages/mailForm.php
  /pages/manageUsers.php
  /include/classes/ElementUser.inc
  /include/helper.inc
  /pages/myRights.php
  /pages/pgeStdFileEdit.inc
  /pages/uaCreateUsers.php
  /pages/uaMyData.php
  /pages/uaMyPW.php
  /pages/XIport.php
  /include/classes/elements/Element.inc
    Implemented javaScript warning onbeforeunload when things were changed on the page but not saved.
      In script.js a variable isDirty is initialized with false. It indicates the page is clean.
      In all inputs, textboxes and selectors onchange='isDirty=true' happens.
      In all saves onclick='isDirty=false' happens.
      The body is checking in its onbeforeunload if the page is dirty and if so showing the warning.
  
2011-06-16
-------------------
  /plugins/CSSTidy
    Added use of CSSTidy in saveFile for the CSS. It fixes the CSS and optimizes it.

  /include/classes/ElementButtons.inc
    Removed link2 as it was identical to link2Element.
    link2Element, link2Url changed to use hidden divs.

  /include/menu.inc
    Introduced [accessable_labs] in menu. It automatically lists all available (visible before schedule) and then all scheduled labs in the order of their schedule.
    More labs have to be set visible_before_schedule or to be scheduled. They are accessable over the "manage elements" page.
    Moved my rights, my status and send mail to menu.inc out of the individual menu files.

  /css/sys/labsys_mop_basic.css
    Added   .labsys_mop_content.labIndexNumber, .labsys_mop_content.labIndexText used by
  /pages/accessableLabs.php
    Lists all labs that are either visablebefore1stschedule or scheduled (same as with the [accessable_labs] in menu).
    
  /include/classes/elements/LsElement.inc:show
    Added showScheduleNote to be displayed on the AllSchedules page when shown.
    
  /include/classes/ElementMenues.inc
    Added link to s element's-Menu.

2011-06-15
-------------------
  /include/classes/elements/LiDBInterface.inc
  /include/classes/elements/LmDBInterface.inc
  /include/classes/elements/LsDBInterface.inc
  /include/classes/elements/LpDBInterface.inc
  /include/classes/elements/LcDBInterface.inc
  /include/classes/elements/LlDBInterface.inc
    History deleted all previous history (bug from some revisions ago)

  /include/XIlib.inc
    Changed mapIt not to return identity but missing when there is no mapping. There is no mapping for deleted elements for instance.
    Changed reindexCollectionElements to use only non-missing elements (before it added ?1 then which led to confusions when a lab was exported that contained already deleted elements in collections).

2011-06-13
-------------------
  /css/sys/labsys_mop_basic.css
    Changed style labsys_mop_m_answers_table_checkbox_cell (added width: 100%) as text boxes for MCs were not full width in Chrome.
  
  Replaced retIfTrue( [condition], [consequence], [alternative] ); with ( ([condition]) ? [consequence] : [alternative] ) in
  /include/classes/ElementMenues.inc
  /include/classes/DBConnection.inc
  /include/classes/DBInterfaceUserRights.inc
  /include/classes/ElementButtons.inc
  /include/classes/elements/BCElement.inc
  /include/classes/elements/Element.inc
  /include/classes/elements/LcDBInterface.inc
  /include/classes/elements/LcElement.inc
  /include/classes/elements/LiDBInterface.inc
  /include/classes/elements/LiDBInterfaceAnswers.inc
  /include/classes/elements/LiDBInterfaceUidTeam.inc
  /include/classes/elements/LiDBInterfaceLocks.inc
  /include/classes/elements/LiElement.inc
  /include/classes/elements/LiDBInterface.inc
  /include/classes/elements/LlDBInterfaceUidStatus.inc
  /include/classes/elements/LlElement.inc
  /include/classes/elements/LmDBInterface.inc
  /include/classes/elements/LmDBInterfaceAnswers.inc
  /include/classes/elements/LpDBInterface.inc
  /include/classes/elements/LmElement.inc
  /include/classes/elements/LpElement.inc
  /include/classes/Menu.inc
  /include/menu.inc
  /include/page_layout.inc
  /include/XIlib.inc.
  /pages/manageUsers.php
  /pages/uaManageUsers.php
  /pages/uaMyData.php
  /php/getDBIbyID.inc
  /php/sendMail.php
  /php/uaMyDataSave.php
  /php/uaMyPWSave.php
  /include/classes/elements/LsElement.inc
  /pages/mailForm.php
  /pages/manage.php
  /pages/sorter.inc
  /pages/uaCreateUsers.php
  /php/uaManageUsersSave.php
  /include/helper.inc
  
  As retIfTrue always evaluated consequence and alternative this could noticeable speed the system up.
  
2011-06-12
-------------------
  /include/classes/Pge.inc:
    Added sanitizeKeys( $string ) to sanitize constants in helper.inc: parseHTML before applying MarkUp.
  /include/helper.inc:
    Uses $pge->sanitizeKeys now before applying markup... (=> constants work with markup now)
    
  /include/classes/DBConnection.inc:
    Changed escapeString. Removed stripslashes ( $val ) as magic quotes is off by default in PHP now.
    
  /include/helper.inc
    Added support for auto formatting/ repairing/ indenting of HTML code using php's tidy.
    
  Added config parameter to control tidy:
    tidyHTML                = "TRUE"
    
  Affects setData functions in
    /include/classes/elements/L{p, s, m, l, i}DBInterface.inc
    
  Updated new* (invoked by newElement in each DBI) so that it uses setData.
  Updated setData in DBIs with a second parameter $createNew
  Update L*DBInterface + helper.inc to use setData instead of newElement respective the newLab etc. functions that got removed.
 
2011-06-08
-------------------
  /include/page_layout.inc
    Updated tinyMCE configuration to run with versions 3.x
    Moved /tiny_mce directory to /plugins/tiny_mce
    
  /plugins
    Added support for MarkUp/ Textile as markup language.
  
2011-05-09
-------------------
  /php/uaCreateUsers.php
    Added functionality to import user names as well

2011-05-08
-------------------
  /include/hostname2config.inc
    Added ilab2. Need for more change
  /include/classes/elements/LlDBInterface.inc
  /include/classes/elements/LlElement.inc
    Some fixings for compatibility with labsystems without authors and UID field
  /include/configuration.inc
    Enables recursive embedding of configurations now which allows partial configs
  /setup/index.php
    Added hostname2config support here as well

2011-05-06
-------------------
 /include/XIlib.inc, /pages/XIport.php:
   Import works now.
 /include/config.inc:
   Including other configs is possible now. 
   
2011-04-12
-------------------
 /include/classes/elements/Element.inc:
  fixed initFromSerialized( &$serializedData )
  - array handling
 /include/XIlib.inc:
  processLocalFiles
  - fixed regex
  
2011-04-12
-------------------
 /include/XIlib.inc,
  getLabsFromDirectory( $directory )
  fixed image replacement issue: replaced some ?<= in preg with ?=  
  
2011-03-21+22
-------------------
 /include/classes/elements/Element.inc:
  fixed initFromSerialized( &$serializedData )

2011-03-18
-------------------
 /include/classes/elements/LlElement.inc:
  replaced urlencode by http_build_query for default UID of the Llelement

2011-01-07
-------------------
 /include/XIlib.inc,
 /pages/XIport.php
  ~Finished export to local directory.
  
2010-12-17
-------------------
 /include/classes/elements/LcElement.inc:
   show() fixed the a name= link to element (there were problems with the intelligent address cutting as c5.m128 ended in c5 but the # set was then wrong).
   
 /include/classes/ElementButtons:
   view() added #fullAddress. When editing an element in a c now and clicking
          on the eye one ends up at the element instead the top of the page.
          
2010-12-17
-------------------
 /include/configuration.inc:
   Added functionality to include a configuration file given with the "include ="
   statement.
   The file that includes the other overwrites the values of the included file.
   This allows having a default config and only changing changed data.
 /include/language.inc:
   Same for the language file.
   This allows to have a default language file making a translation of new things not mandatory at the beginning.
   
 /css/sys/labsys_mop_basic.css:
   Added/ changed labsys_mop_l_authors, labsys_mop_l_comment used in L-element
   
 /include/classes/elements/LlElement.inc:
 /include/classes/elements/LlDBInterface.inc:
   Added fields uniqueID, authors for export/ import.
   Added comment view in showTOC()
   
 /setup/sql_new_ddb_lab_tbl.sql:
   Added new fields.
   
 /ini/config_?.ini:
   Added value: exportImportDir giving the directory for export/ import
   
 /ini/menu_?.ini:
   Added link to export/ import
 
2010-12-16
-------------------
 /include/classes/elements/L?Element.inc:
  added $this->serializationArray for serialisation via:
 /include/classes/elements/Element.inc:
  added functions getSerialized(), initFromSerialized( &$serializedData )
 /include/classes/DBConnection.inc:
  added mkInsertReturnIDX
 /include/classes/elements/L?Element.inc:
  changed new? to use mkInsertReturnIDX saving 2 operations each time now
 
2010-11-3
-------------------
 /include/classes/elements/BCElement.inc:
 line 178 $GET['address'] -> $url->get('address')
 
2010-10-24
-------------------
 /include/page_layout.inc
 Stylesheets were not loaded in IE cause they contained character encoding information in the link. -> removed.
 
2010-10-17
-------------------
  /pages/export_import_labs.php: new landing page for export/ import activities
  /include/classes/Element.inc: 
  /ini/*.lng: Added "lExportImportNote" to appear on top of this page

2010-03-28
-------------------
  Fix variable manage
  Add search manage

2010-08-23
-------------------
  /include/classes/ElementButtons.inc: history link fixed.
  /include/classes/elements/LiElement.inc: Added Button for *c (now *p, *m, *i, *c, *C)
  
2010-08-23
-------------------
  /include/classes/ElementButtons.inc: Repaired the link2 with a confirm() JS box (was not working properly via relative links before)
  /include/classes/elements/LiElement.inc: Added <a name="$address"></a> for relative linking with #$address

2010-08-22
-------------------
  /include/classes/elements/LlElement.php: Added the new *creat feature for faster creating of content also to the lab selection
  moved createNew( $elementID ) from /include/classes/elements/LcElement.php to /include/helper.inc as it is global.
  
2010-08-19
-------------------
  /include/logger.inc: fixed session detection
  /include/classes/elements/LcElement.php: Added the new *creatte [insertNew( $elementID )] feature for faster creating of content
 
 
2010-06-17
-------------------
  /include/classes/elements/LlElement.inc:
  checkPreLab() If checker finished prelab only check the others. (teams encountered problems that their state was not set appropriately.)
  
  trigger_error + exit as it does not abort otherwise:
    /include/classes/elements/LcDBInterface.inc:  newCollection( &$eC )
    /include/classes/elements/LcElement.inc:      save()
    /include/classes/elements/LiElement.inc:      save(), saveUserAnswer(), saveCorrectorStuff(), setUserAnswerLock()
    /include/classes/elements/LlDBInterface.inc:  newLab( &$eL )
    /include/classes/elements/LlElement.inc:      save(), checkPreLab(), closeLabInputs(), closeLabInputs(), updateStatus2()
    /include/classes/elements/LmDBInterface.inc:  newMultipleChoice( &$eM )
    /include/classes/elements/LmElement.inc:      save(), saveUserAnswer()
    /include/classes/elements/LpDBInterface.inc:  newPage( &$eP )
    /include/classes/elements/LpElement.inc:      save()
    /include/classes/elements/LmDBInterface.inc:  newSchedule( &$eS )
    /include/classes/elements/LsElement.inc:      save()
    /include/classes/Ram.inc
    /include/configuration.inc
    /include/language.inc
    /pages/confirm.php
    /pages/edit.php
    /pages/history.php
    /pages/view.php
    /php/authenticate.php
    /php/authenticate4Demo.php
    /php/changeMyRights.php
    /php/emptyDB.php
    /php/executeCommandOnElement.php
    /php/executeOnLab.php
    /php/getDBIbyID.inc
    /php/getFirstLastFinal.inc
    /php/saveFile.php
    /php/saveUserRights.php
    /php/sendMail.php
    /php/uaCreateUsers.php
    /php/uaManageUsersExecute.php
    /php/uaManageUsersSave.php
    /php/uaMyDataSave.php
    /php/uaMyPWSave.php
    /php/uaPwRemind.php
    /setup/index.php
    
  
  
  
  
  
2010-04-25
-------------------
  Added logging functionality:
  include/logger.inc
  
  Events logged:
  php/authenticate.php      system, login
  php/logout.php            system, logout
  php/sendMail.php          system, mail sent
  php/saveFile.php          system, saved file $_POST['FILENAME']
  php/saveUserRights.php    system, saved user rights
  php/changeMyRights.php    system, rights changed (new value in log field)
  php/delete.php            edit, deleted, id
  php/uaCreateUsers.php     useradmin, new users created
  php/uaMyDataSave.php      useradmin, saved userdata of $_POST['USERNAME']
  php/uaMyPWSave.php        useradmin, saved password of $_POST['USERNAME']
  pages/edit.php            edit, open, fullId
  pages/pgeStdFileEdit.php  system, edit open, filename
  pages/view.php            view, show, fullId
  include/classes/elements/L{i,m,l}Element.php
  
  

2010-03-27
-------------------
  User configuration allows several user edit options.
  Changed, so that not 'useradmin' as configuration is the criterion to allow options but en ending of ...'useradmin' is.
  This became necessary with the change of the 2010-02-01.
  
/include/classes/Usr.inc
  Fixed "seesDataOf" so it works correct for "IS_DB_USER_ADMIN" now.

2010-02-06
-------------------
  Renaming of the menu files in ini/
  Changing hostname2config.inc
  Fixed password change bug in php/uaMyPWSave.php (sha1 instead of PASSWORD)
  
2010-02-01
-------------------
/includes/init.inc
/includes/hostname2config.inc
  Added the capability to reflect the hostname to the configname.
  This allows ilab2.net.in.tum.de to point to config files with infix ilab2_
  for instance enabling labsystem-based vhosts...

2010-01-25
-------------------
/include/classes/LiElement.inc
  Locks: - Save even if not allowed
         - Be not able to open loked questions

2010-01-12
-------------------
Sourceforge release.

2008-11-05
-------------------
pages/uaManageUsers.php
  Fixed mysql-timestamp formatting problem
 
2008-11-04
-------------------
php/sendMail.php
  German Umlauts to their respective characters since they were not handled properly.
 
2008-10-08
-------------------
setup/setup.php
  PASSWORD('admin') -> sha1('admin')

include/php_session_management.inc
  Since php 5.0.5 all objects are destroyed before the session save handler is called.
  So now I write the session data to files eliminating any DB accesses.
  Session-Data-Path is directly coded into the file since the cfg-object is also killed before call...

2008-05-10
-------------------
php/uaUnPwRemind.php
  integrated loop to handle password request via mailaddress for 
  users with multiple accounts per mailaddress

2008/01/18
------------------------------------
include/classes/DBConnection.inc
 mkUpdIns
  mysql_affected_rows()
  Did suddenly not report correct Results for UPDATE on Gentoo anymore.
  $rows_matched doesn't work on Debian...
  So now: UPDATE -> SELECT if UPDATE performed -else-> INSERT

2007/10/19
------------------------------------
pages/sorter.inc:
  Make ready without javascript (submit button)
pages/manageUsers.php, pages/uamanageUsers.php:
  Keep sorting when jumping to another page

php/uaCreateUsers.php:
  Remove "\r" (problemswith mail otherwhise)
php/uaManageUsersExecute.php:
  Delete fixed for users without javascript

2007/ 09/ 03
------------------------------------
setup.php:197
  Only create admin user if he does not exist.
 
------------------------------------
2007/ 07/ 07
 /include/page_layout.inc
   "isset( $_GET" -> "$url->available()"

 "hideAnswers" to temporary hide the answers when in seeing mode.
 (This is helpfull, when you are suggested to edit something while
  seeing the answers of all users because they get temporarily hid-
  den and you can still edit them in a not paused window)
 /include/init.inc
   $url->preserve("hideAnswers");
 /include/classes/Usr.inc
   isSeeingSomeonesData(): Added pausing
 /syspix/button_paused_9x9.gif
   New.
 /include/page_layout.inc
   Added pause-button if $usr->isSeeingSomeonesData().
   Added statud Msg if paused in this window. (To end close Window or remove Variable from URL).
   
------------------------------------
2007/ 02/ 14
  /css/sys/labsys_mop_print_theme.css: There is a problem with "page-break-befre: always;"
    in Firefox, Konqueror, ... (in IE it works).
    Font changed to Times, Serif
    Size changed to 12pt
  /css/sys/labsys_mop_basic_theme.css: .labsys_mop_content{ line-height: 1.25em; } added
    for better readability.
  /php/sendMail.php: In Mailtxt replaced "\r\n" by "\n" for having no empty lines between lines.
  /pages/mailForm.php: Added Option to send via BCC (for Roundmails). The ini-File Value is the default here.
 
------------------------------------
2007/ 02/ 13
  /php/getFirstLastFinal.inc: SQL-injection was possible through "address=" field 
     in URL. Check via Ddbc::escapeString() implemented.
  /include/page_layout.inc: Crossside-Scripting was easily possible via the syserror
    and sysinfo-messages. htmlEntities() enabled.
  /include/classes/DBInterfaceUser.inc: authenticate: $username gets escapeStringed now.
 
------------------------------------
2006/ 07/ 11
  /include/helper.inc:
    returnHTML(): Calls parseHTML now.
    parseHTML(): Indents "   " now ("&nbsp;" inserted)
 
------------------------------------
2006/ 07/ 11
  /include/classes/DBInterfaceUser.php:
    Changed from SQL-"PASSWORD"-Encryption to md5 hash (Reason: insecure conn. 
    to SQL-server possible).
    Alaso affects /php/uaUnPwRemind.php.
    
  /include/classes/ElementButtons.inc
    History shortened to $cfg->get( 'limitHistLns2' ) if available.
    
  /pages/history.php
    Style of history was invisible (display: none;)
    New ini-file entry! "limitHistLns2"
    
  /css/sys/labsys_mop_basic.css
    Changes to
     .labsys_mop_i_example_solution
     .labsys_mop_i_example_solution pre (new)
     .labsys_mop_i_teamnr
     .labsys_mop_i_credits_green
     .labsys_mop_i_credits_red


------------------------------------
2006/ 07/ 06
  /include/classes/elements/LlElement.inc:
    getMenu(): Moved allQuestions entry one level up (not only in unfolded menu)

  /pages/mailForm.php:
    DontSendMeMail by default on.
    Iteration over User: If no dataset found (user has rights but is not associated
                         with this course at the moment) "!$userData", don't list
                         the user.


------------------------------------
2006/ 05/ 28
  /include/classes/menu.inc:
    SSL Login Link added (also affecting ini-Files)

------------------------------------
2006/ 05/ 12
  /include/classes/elemnts/LlElement.inc:
    reMapUidTeam( $uid, $team ): PreLabPoints did not get preserved (wrong named var).

------------------------------------
2006/ 05/ 05
  /include/classes/elemnts/LmElement.inc:
    Wrong counting: getGivenCredits(): $this->isCorrectlyAnswered

  /php/uaManageUsersSave.php:
  /pages/uaManageUsers.php:
    Even though only a selecion was shown the save function tried to
    save all datasets resulting in zero course-assignment...
    -> uid_present-field inserted and processed.


------------------------------------
2006/ 05/ 04
  ua create users:
    seperated by linebreak instead of space
    /php/uaCreateUsers.php:55: explode( "\n"

    UserDBField_name added so username (for history) also
    gets mailaddress (if users don't complete their names...)

  /pages/manageUsers.php:
    If user does not exist in UserDB anymore don't show it.
    (not exist = return false )
 
  /pages/{uaM|m}anageUsers.php:
    Multiple pages -> Sorting lost -> '&orderBy='.$orderByKey. added to URL

  /pages/sorter.inc:
    Changed to provide $orderByKey

------------------------------------
2006/ 04/ 25
 lElement.inc: Display user's name only once at lab overview.
 uaManageUsers.php: Implemented "multiple Page-Result" (s.b.) here.


------------------------------------
2006/ 03/ 25
 pages/mailForm.php: Added JavaScript to check all MailReceivers (no loss of text!)
 lElement.inc: Changed position of humen readible name and credits/ of

------------------------------------
2006/ 02/ 20
 lElement.inc: Added human readible real names at lab overview.

------------------------------------
2006/ 02/ 19
 pages/uamanageusers.php: Added multiple Page-Result (like in manage.php). Was missing.

------------------------------------
2006/ 01/ 08
 Problem: \ gets cut each loading from db. Reason: stripslashes
 addslashes is not correct for mysql! s.b.
 DBConnection.inc: added escapeString, unEscapeString
 All DBInterfaces changed:
	addslashes -> $this->myDBC->escapeString
	stripslashes -> $this->myDBC->unEscapeString

------------------------------------
2005/ 11/ 08
 Added points for theory part.
 New fields in workingDB.lab_uid_status
  * prelab_given_credits int default 0
  * prelab_possible_credits int default 0
 New/ altered in .ini-files:
    ;; For the percentage bar *********************************************************************
    percentageFailedLab       = "0.75"  ; The percentage bar is colored ( red<=percentageFailed .. green = 100% )
    percentageFailedPreLab    = "0.5"   ; The percentage bar is colored ( red<=percentageFailed .. green = 100% )

 Changed LlElement.inc, LlDBInterfaceUidStatus.inc, LmElement.inc, LiElement.inc

------------------------------------
2005/ 10/ 21
 Added navigation and division into pages with limited entries for the manage pages.
 -> new ini-entry: DefElmntsPerManagePage